#:kivy 1.8.0

<Playground>

    snake: snake_id
    fruit: fruit_id

    Snake:
        id: snake_id
        width: root.width/root.col_number
        height: root.height/root.row_number

    Fruit:
        id: fruit_id
        width: root.width/root.col_number
        height: root.height/root.row_number


    Label:
        font_size: 70
        center_x: root.x + root.width/root.col_number*2
        top: root.top - root.height/root.row_number
        text: str(root.score)
        color: 1,0,1,1


<Snake>
    head: snake_head_id
    tail: snake_tail_id

    SnakeHead:
        id: snake_head_id
        width: root.width
        height: root.height

    SnakeTail:
        id: snake_tail_id
        width: root.width
        height: root.height


<WelcomeScreen>
	AsyncImage:
		source:'logo.jpg'
		allow_stretch: True
		keep_ratio: False
    AnchorLayout:
        
        BoxLayout:
            orientation: "vertical"
            size_hint: (1, 1)
            spacing: 10
            Label:
                size_hint_y: .01
                text: 'Học Viện Công Nghệ Bưu Chính Viễn Thông'
                color: 1,0,0,1
                font_size: 30
                bold: True
            Label:
                size_hint_y: .01
                text: "Khoa Kỹ Thuật Điện - Điện Tử 2"
                color: 1,0,0,1
                font_size: 30
            Label:
                size_hint_y: .015
                text: "ĐỒ ÁN TỐT NGHIỆP"
                color: 1,0,0,1
                valign: "bottom"
                bold: True
                font_size: 50
                padding: 0, 0
            
            AnchorLayout:
                anchor_x: "center"
                size_hint_y: .1

                BoxLayout:
                    size_hint: .2, .2
                    orientation: "vertical"
                    spacing: 10

                    Button:
                        halign: "center"
                        valign: "middle"
                        text: "CHƠI"
                        on_press: root.manager.current = "playground_screen"

                    Button:
                        halign: "center"
                        valign: "middle"
                        text: "CÀI ĐẶT"
                        on_press: root.show_popup()

                    Button:
                        halign: "center"
                        valign: "middle"
                        text: "LỊCH SỬ"
                        on_press: root.manager.current = "defeated_screen"
                        


<PlaygroundScreen>:
    game_engine: playground_widget_id
    AsyncImage:
        source:'brg_onPlay.jpg'
        allow_stretch: True
        keep_ratio: False
    Playground:
        id: playground_widget_id

<DefeatedScreen>:
    AnchorLayout:
        
        BoxLayout:
            orientation: "vertical"
            size_hint: (1, 1)
            spacing: 10
            Label:
                size_hint_y: .1
                text:"GAME OVER"
                color: 0,1,0,1
                font_size: 30
                bold: True
            Button:
                halign: "center"
                valign: "middle"
                text: "CHƠI LẠI"
                on_press: root.manager.current = "playground_screen"


<OptionsPopup>
    border_option_widget: border_option_widget_id
    speed_option_widget: speed_option_widget_id
    
    title: "Options"
    size_hint: .75, .75

    BoxLayout:
        orientation: "vertical"
        spacing: 20

        GridLayout:
            size_hint_y: .8
            cols: 2

            Label:
                text: "Borders"  
                halign: "center"

            Switch:
                id: border_option_widget_id

            Label: 
                text: "Game speed"
                halign: "center"

            Slider:
                id: speed_option_widget_id
                max: 10
                min: 1
                step: 1
                value: 1

        AnchorLayout:
            anchor_x: "center"
            size_hint: 1, .25

            Button:
                size_hint_x: 0.5
                text: "Save changes"
                on_press: root.dismiss()

